(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{"+J8G":function(t,e,i){"use strict";i.r(e),i.d(e,"AccountingEntryModule",function(){return rt});var a=i("ofXK"),n=i("3Pt+"),o=i("1kSV"),r=i("tmjD"),c=i("tyNb"),s=i("kYp3"),l=i("fXoL"),u=i("JqCM"),d=i("tk/3"),m=i("jhN1"),p=i("dlU0"),b=i("bZwt"),g=i("ONAA"),h=i("1tD9"),f=i("IVaK"),y=i("zT7k"),j=i("d3lv"),v=i("YfBy"),R=i("n/9U"),G=i("ZEYb"),A=i("ZMR0"),S=i("fcMv"),O=i("Ca8N"),E=i("/eUb");const I=function(){return["admin_master","admin","system_auditor"]},M=function(){return["admin_master"]},D=function(){return["admin"]};function P(t,e){if(1&t){const t=l.Sb();l.Rb(0,"form-toolbar",9),l.cc("backToOriginEmitter",function(){return l.Ac(t),l.ec().backToOrigin()})("toReportEmitter",function(){return l.Ac(t),l.ec().toReport()})("onSearchFormSubmitEmitter",function(){return l.Ac(t),l.ec().onSearchFormSubmit()})("listDataEmitter",function(){return l.Ac(t),l.ec().listData()})("listDataNoCacheEmitter",function(){return l.Ac(t),l.ec().listDataNoCache()})("auditListEmitter",function(){return l.Ac(t),l.ec().auditList()})("normalListEmitter",function(){return l.Ac(t),l.ec().normalList()})("addObjectEmitter",function(){return l.Ac(t),l.ec().addObject()}),l.Qb()}if(2&t){const t=l.ec();l.jc("title",t.title)("editing",t.editing)("searchForm",t.searchForm)("backToOrigin",!t.editing&&"general"!=t.origin)("useReport",!0)("auditingExclusions",t.auditingExclusions)("enabledAuditList",l.oc(8,I).includes(t.logged.category))("disabledAddNew",!l.oc(9,M).includes(t.logged.category)&&!(l.oc(10,D).includes(t.logged.category)&&t.permissions.includes("accountingentry_write"))||"general"!=t.accountingGroupType&&t.accountingGroupType!=t.origin)}}function N(t,e){1&t&&(l.Rb(0,"div",11),l.Rb(1,"h5"),l.Rb(2,"span"),l.Ic(3,"Filtro do Relat\xf3rio de Lan\xe7amentos de Caixa"),l.Qb(),l.Qb(),l.Qb())}function F(t,e){if(1&t){const t=l.Sb();l.Rb(0,"div",10),l.Rb(1,"div",11),l.Rb(2,"button",12),l.cc("click",function(){return l.Ac(t),l.ec().backFromReport()}),l.Nb(3,"i",13),l.Qb(),l.Qb(),l.Gc(4,N,4,0,"div",14),l.Rb(5,"div",15),l.Rb(6,"div",11),l.Rb(7,"button",16),l.cc("click",function(){return l.Ac(t),l.ec().changeFilterReport()}),l.Nb(8,"i",17),l.Qb(),l.Qb(),l.Rb(9,"div",11),l.Rb(10,"button",18),l.cc("click",function(){return l.Ac(t),l.ec().printReport()}),l.Nb(11,"i",19),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&t){const t=l.ec();l.yb(4),l.jc("ngIf",t.inFilter),l.yb(3),l.jc("disabled",t.emptyString(t.htmlReport)),l.yb(3),l.jc("disabled",t.emptyString(t.htmlReport))}}function C(t,e){if(1&t){const t=l.Sb();l.Rb(0,"form",25),l.cc("ngSubmit",function(){return l.Ac(t),l.ec(2).loadReport()}),l.Rb(1,"div"),l.Rb(2,"rich-filter-selector",26),l.cc("infoContainEmitter",function(){return l.Ac(t),l.ec(2).infoAccountingGroupContain()})("filterObjectsEmitter",function(e){return l.Ac(t),l.ec(2).filterAccountingGroups(e)})("valueChangedEmitter",function(e){return l.Ac(t),l.ec(2).setSelectedAccountingGroupForReport(e)}),l.Qb(),l.Nb(3,"rich-date-picker",27),l.Nb(4,"rich-date-picker",28),l.Nb(5,"div",4),l.Qb(),l.Rb(6,"form-action",29),l.cc("cancelDataEmitter",function(){return l.Ac(t),l.ec(2).cancelData()}),l.Qb(),l.Qb()}if(2&t){const t=l.ec(2);l.jc("formGroup",t.reportForm),l.yb(2),l.jc("selectedObject",t.selectedAccountingGroupForReport)("objects",t.accountingGroups),l.yb(1),l.jc("formGroup",t.reportForm),l.yb(1),l.jc("formGroup",t.reportForm),l.yb(2),l.jc("validationMessages",t.validationMessages)("processValidation",t.processValidation)}}function T(t,e){if(1&t&&l.Nb(0,"div",30),2&t){const t=l.ec(2);l.jc("innerHtml",t.htmlReport,l.Bc)}}function Q(t,e){if(1&t&&(l.Rb(0,"section",20),l.Gc(1,C,7,7,"form",21),l.Qb(),l.Nb(2,"div",22),l.Gc(3,T,1,1,"div",23),l.Nb(4,"div",24)),2&t){const t=l.ec();l.yb(1),l.jc("ngIf",t.inFilter),l.yb(2),l.jc("ngIf",!t.inFilter)}}function w(t,e){if(1&t){const t=l.Sb();l.Rb(0,"section",33),l.Rb(1,"form",25),l.cc("ngSubmit",function(){return l.Ac(t),l.ec(2).onObjectFormSubmit()}),l.Rb(2,"div"),l.Rb(3,"rich-filter-selector",34),l.cc("infoContainEmitter",function(){return l.Ac(t),l.ec(2).infoAccountingGroupContain()})("filterObjectsEmitter",function(e){return l.Ac(t),l.ec(2).filterAccountingGroups(e)})("valueChangedEmitter",function(e){return l.Ac(t),l.ec(2).setSelectedAccountingGroup(e)}),l.Qb(),l.Rb(4,"rich-filter-selector",35),l.cc("infoContainEmitter",function(){return l.Ac(t),l.ec(2).infoMaterialContain()})("filterObjectsEmitter",function(e){return l.Ac(t),l.ec(2).filterMaterials(e)})("valueChangedEmitter",function(e){return l.Ac(t),l.ec(2).setSelectedMaterial(e)}),l.Qb(),l.Nb(5,"rich-input-select",36),l.Nb(6,"rich-input-text",37),l.Nb(7,"rich-input-text",38),l.Nb(8,"rich-date-picker",39),l.Nb(9,"div",4),l.Qb(),l.Rb(10,"form-action",40),l.cc("cancelDataEmitter",function(){return l.Ac(t),l.ec(2).cancelData()}),l.Qb(),l.Qb(),l.Qb()}if(2&t){const t=l.ec(2);l.yb(1),l.jc("formGroup",t.dataForm),l.yb(2),l.jc("selectedObject",t.selectedAccountingGroup)("objects",t.accountingGroups),l.yb(1),l.jc("selectedObject",t.selectedMaterial)("objects",t.materials),l.yb(1),l.jc("objects",t.types),l.yb(1),l.jc("formGroup",t.dataForm),l.yb(1),l.jc("formGroup",t.dataForm),l.yb(1),l.jc("formGroup",t.dataForm),l.yb(2),l.jc("validationMessages",t.validationMessages)("processValidation",t.processValidation)}}function x(t,e){1&t&&(l.Rb(0,"th",56),l.Ic(1," Mat./Prod. "),l.Qb())}function V(t,e){1&t&&(l.Rb(0,"th",57),l.Ic(1," Mat./Prod. + Ev./At. "),l.Qb())}function L(t,e){1&t&&(l.Rb(0,"th",58),l.Ic(1," A\xe7\xf5es "),l.Qb())}function k(t,e){1&t&&(l.Rb(0,"th",59),l.Ic(1," A\xe7\xf5es "),l.Qb())}function q(t,e){if(1&t&&l.Nb(0,"div",62),2&t){const t=l.ec().$implicit;l.jc("innerHtml",t.appointmentPageName,l.Bc)}}function B(t,e){if(1&t){const t=l.Sb();l.Rb(0,"tr",60),l.Rb(1,"td",61),l.Nb(2,"div",62),l.Nb(3,"div",62),l.Qb(),l.Rb(4,"td",61),l.Rb(5,"div"),l.Nb(6,"span",62),l.Rb(7,"span"),l.Ic(8,"\xa0"),l.Qb(),l.Nb(9,"span",62),l.Nb(10,"span",62),l.Qb(),l.Gc(11,q,1,1,"div",63),l.Qb(),l.Nb(12,"td",64),l.Rb(13,"td",65),l.Nb(14,"span",62),l.Nb(15,"span",62),l.Qb(),l.Rb(16,"td",65),l.Nb(17,"span",62),l.Nb(18,"span",62),l.Qb(),l.Rb(19,"td",66),l.Rb(20,"div",67),l.Rb(21,"edit-delete-action",68),l.cc("showObjectEmitter",function(e){return l.Ac(t),l.ec(4).showObject(e)})("editObjectEmitter",function(e){return l.Ac(t),l.ec(4).editObject(e)})("deleteObjectEmitter",function(e){return l.Ac(t),l.ec(4).deleteObject(e)})("unDeleteObjectEmitter",function(e){return l.Ac(t),l.ec(4).unDeleteObject(e)}),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&t){const t=e.$implicit,i=l.ec(4),a=l.yc(14),n=l.yc(16),o=l.yc(12);l.yb(2),l.jc("innerHtml",t.accountingGroupName,l.Bc),l.yb(1),l.jc("innerHtml",t.occurency,l.Bc),l.yb(3),l.jc("innerHtml",t.materialName,l.Bc),l.yb(3),l.jc("innerHtml",t.materialUnits,l.Bc),l.yb(1),l.jc("innerHtml",t.materialMeasureUnitName,l.Bc),l.yb(1),l.jc("ngIf","appointmentpage"==i.accountingGroupType),l.yb(1),l.jc("innerHtml",t.amountLabel,l.Bc),l.yb(2),l.jc("innerHtml",t.typeLabel,l.Bc),l.yb(1),l.jc("innerHtml",t.unitaryCostLabel,l.Bc),l.yb(2),l.jc("innerHtml",t.typeLabel,l.Bc),l.yb(1),l.jc("innerHtml",t.totalLabel,l.Bc),l.yb(3),l.jc("auditingExclusions",i.auditingExclusions)("object",t)("logged",i.logged)("noAction",!(l.oc(18,M).includes(i.logged.category)||l.oc(19,D).includes(i.logged.category)&&i.permissions.includes("accountingentry_write")))("objectDeleteConfirmation",a)("objectUnDeleteConfirmation",n)("objectDetail",o)}}function H(t,e){if(1&t){const t=l.Sb();l.Rb(0,"table",43),l.Rb(1,"thead",44),l.Rb(2,"tr"),l.Rb(3,"th",45),l.Ic(4," Gr. Lan\xe7. + Data "),l.Qb(),l.Gc(5,x,2,0,"th",46),l.Gc(6,V,2,0,"th",47),l.Rb(7,"th",48),l.Ic(8," Qtd. "),l.Qb(),l.Rb(9,"th",49),l.Ic(10," Vlr. Un. "),l.Qb(),l.Rb(11,"th",50),l.Ic(12," Vlr. Tot. "),l.Qb(),l.Gc(13,L,2,0,"th",51),l.Gc(14,k,2,0,"th",52),l.Qb(),l.Qb(),l.Rb(15,"tbody"),l.Gc(16,B,22,20,"tr",53),l.Rb(17,"tr"),l.Rb(18,"td",54),l.Rb(19,"table-navigator",55),l.cc("previousPageEmitter",function(){return l.Ac(t),l.ec(3).previousPage()})("setPageEmitter",function(e){return l.Ac(t),l.ec(3).setPage(e)})("nextPageEmitter",function(){return l.Ac(t),l.ec(3).nextPage()})("adjustPaginationEmitter",function(e){return l.Ac(t),l.ec(3).adjustPagination(e)}),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&t){const t=l.ec(3);l.yb(5),l.jc("ngIf","general"==t.accountingGroupType),l.yb(1),l.jc("ngIf","appointmentpage"==t.accountingGroupType),l.yb(7),l.jc("ngIf",!t.auditingExclusions),l.yb(1),l.jc("ngIf",t.auditingExclusions),l.yb(2),l.jc("ngForOf",t.objects)("ngForTrackBy",t.trackById),l.yb(3),l.jc("pages",t.pages)("selectedPage",t.selectedPage)("previousPageDisabled",t.previousPageDisabled)("nextPageDisabled",t.nextPageDisabled)("rowsPerPage",t.rowsPerPage)("pageRange",t.pageRange)("totalPages",t.totalPages)("totalRows",t.totalRows)("useAdjustPagination",!0)}}function U(t,e){if(1&t&&(l.Rb(0,"section",41),l.Gc(1,H,20,15,"table",42),l.Qb()),2&t){const t=l.ec(2);l.yb(1),l.jc("ngIf",t.objects)}}function _(t,e){if(1&t&&(l.Gc(0,w,11,11,"ng-template",31),l.Gc(1,U,2,1,"ng-template",null,32,l.Hc),l.Nb(3,"div",4)),2&t){const t=l.yc(2),e=l.ec();l.jc("ngIf",e.editing)("ngIfElse",t)}}function K(t,e){if(1&t&&(l.Rb(0,"tr"),l.Rb(1,"th",69),l.Ic(2," Grupo Lan\xe7amento: "),l.Qb(),l.Rb(3,"td",70),l.Ic(4),l.Qb(),l.Qb(),l.Rb(5,"tr"),l.Rb(6,"th",71),l.Ic(7," Produto/Material: "),l.Qb(),l.Rb(8,"td",70),l.Ic(9),l.Qb(),l.Qb(),l.Rb(10,"tr"),l.Rb(11,"th",71),l.Ic(12," Quantidade: "),l.Qb(),l.Rb(13,"td",70),l.Ic(14),l.Qb(),l.Qb(),l.Rb(15,"tr"),l.Rb(16,"th",71),l.Ic(17," Valor Unit\xe1rio: "),l.Qb(),l.Rb(18,"td",70),l.Ic(19),l.Qb(),l.Qb(),l.Rb(20,"tr"),l.Rb(21,"th",71),l.Ic(22," Data: "),l.Qb(),l.Rb(23,"td",70),l.Ic(24),l.Qb(),l.Qb()),2&t){const t=l.ec();l.yb(4),l.Kc(" ",t.selectedObject.accountingGroupName," "),l.yb(5),l.Mc(" ",t.selectedObject.materialName," ",t.selectedObject.materialUnits,"",t.selectedObject.materialMeasureUnitName," "),l.yb(5),l.Kc(" ",t.selectedObject.amount," "),l.yb(5),l.Kc(" ",t.selectedObject.unitaryCost," "),l.yb(5),l.Kc(" ",t.occurencySelectedObject," ")}}function J(t,e){if(1&t){const t=l.Sb();l.Rb(0,"delete-confirmation",72),l.cc("cancelDataEmitter",function(){return l.Ac(t),l.ec().showObject()}),l.Qb()}if(2&t){const t=l.ec(),e=l.yc(10);l.jc("selectedObject",t.selectedObject)("templateOutlet",e)}}function Z(t,e){if(1&t){const t=l.Sb();l.Rb(0,"delete-confirmation",73),l.cc("confirmDeleteObjectEmitter",function(e){return l.Ac(t),l.ec().confirmDeleteObject(e)})("cancelDataEmitter",function(){return l.Ac(t),l.ec().cancelData()}),l.Qb()}if(2&t){const t=l.ec(),e=l.yc(10);l.jc("selectedObject",t.selectedObject)("auditingExclusions",t.auditingExclusions)("templateOutlet",e)}}function Y(t,e){if(1&t){const t=l.Sb();l.Rb(0,"delete-confirmation",74),l.cc("confirmDeleteObjectEmitter",function(e){return l.Ac(t),l.ec().confirmUnDeleteObject(e)})("cancelDataEmitter",function(){return l.Ac(t),l.ec().cancelData()}),l.Qb()}if(2&t){const t=l.ec(),e=l.yc(10);l.jc("selectedObject",t.selectedObject)("auditingExclusions",t.auditingExclusions)("templateOutlet",e)}}const z=function(){return{value:"general",label:"Geral",title:"Lan\xe7amentos de Caixa de grupos tipo Geral"}},W=function(){return{value:"appointmentpage",label:"Eventos/Atividades",title:"Lan\xe7amentos de Caixa de grupos tipo Evento/Atividade"}},X=function(t,e){return[t,e]},$=function(t){return[t]},tt=[{path:"",component:(()=>{class t extends s.a{constructor(t,e,i,a,n,o,r,c,s,l,u){super(t,e,i,a,n,o,r,c,s,l,u)}ngOnInit(){this.setInitializationServices(["accountingentry","accountinggroup","material","appointmentpage","user","module"]),this.crudService=this.accountingEntryService,this.origin=this.storageService.get()[0],"appointmentpage"==this.origin&&(this.selectedAppointmentPage=this.storageService.get()[1],this.setDateIntervals(!0,!1)),this.accountingGroupType=this.emptyString(this.origin)?"general":this.origin,this.storageService.localStorageSetItem("_accountingGroupType_"+this.getAppId(),this.accountingGroupType,!1),this.sucessErrorMessages={200:"Lan\xe7amento de Caixa adicionado com sucesso.",201:"Lan\xe7amento de Caixa alterado com sucesso.",204:"Lan\xe7amento de Caixa exclu\xeddo com sucesso.",207:"Lan\xe7amento de Caixa restaurado com sucesso.",208:"Lan\xe7amento de Caixa exclu\xeddo [PERMANENTE] com sucesso."},this.listTitle="Lan\xe7amentos",this.addTitle="Adicionar Lan\xe7amento de Caixa",this.editTitle="Editar Lan\xe7amento de Caixa",this.dataForm=new n.f({amount:new n.c("",[n.s.required]),unitaryCost:new n.c("",[n.s.required]),occurency:new n.c("",[n.s.required]),type:new n.c("",[n.s.required])}),this.reportForm=new n.f({start:new n.c("",[n.s.required]),finish:new n.c("",[n.s.required])}),this.types=[{value:"E",label:"Entrada"},{value:"S",label:"Sa\xedda"}],super.ngOnInit()}afterNgOnInit(){this.parameterName="accountingGroupName/materialName",this.loadModules(),this.loadResources()}ngOnDestroy(){this.occurencySelectedObject=null,this.htmlReport=null,this.reportForm=null,this.inReport=null,this.inFilter=null,this.selectedAppointmentPage2=null,this.origin=null,this.selectedAccountingGroupForReport=null,this.selectedMaterial=null,this.materials=null,this.selectedAccountingGroup=null,this.accountingGroups=null,this.accountingGroupType=null,this.types=null,this.storageService.localStorageRemoveItem("_accountingGroupType_"+this.getAppId()),super.ngOnDestroy()}setSelectedMaterial(t){this.selectedMaterial=this.getFromArrayById(this.materials,t,null),!this.emptyObject(t)&&t>0&&this.emptyObject(this.selectedMaterial)&&this.materialService.load(t).then(t=>{this.processObjectAndValidationResult(t,!0)&&(this.materials.unshift(t),this.selectedMaterial=t)})}filterMaterials(t){this.preFilterByName(t)&&this.loadMaterials()}loadMaterials(){this.selectedMaterial=null,this.materialService.getAll(1,5,this.getNameToFilterCondition()).then(t=>{this.materials=this.clearRowZeroObjectsValidated(t),this.setProcessing(!1),this.materials.length>0&&this.setSelectedMaterial(this.materials[0].id)})}setSelectedAccountingGroup(t){this.selectedAccountingGroup=this.getFromArrayById(this.accountingGroups,t,null),!this.emptyObject(t)&&t>0&&this.emptyObject(this.selectedAccountingGroup)&&this.accountingGroupService.load(t).then(t=>{this.processObjectAndValidationResult(t,!0)&&(this.accountingGroups.unshift(t),this.selectedAccountingGroup=t)})}filterAccountingGroups(t){this.preFilterByName(t)&&this.loadAccountingGroups()}loadAccountingGroups(){this.selectedAccountingGroup=null;var t=this.getNameToFilterCondition()+" xoo type = quaspa"+this.accountingGroupType+"quaspa ";this.accountingGroupService.getAll(1,5,t).then(t=>{this.accountingGroups=this.clearRowZeroObjectsValidated(t),this.setProcessing(!1),this.accountingGroups.length>0&&this.setSelectedAccountingGroup(this.accountingGroups[0].id)})}infoMaterialContain(){this.infoContainGeneric("o","e","Materiais/Produtos","Material/Produto","material/produto","pela identifica\xe7\xe3o")}infoAccountingGroupContain(){this.infoContainGeneric("o","e","Grupos Lan\xe7amentos","Grupo Lan\xe7amento","grupo lan\xe7amento","pela identifica\xe7\xe3o")}setDateIntervals(t,e){super.setMinMaxDateConfigDefault(),t&&"appointmentpage"==this.origin&&this.setMinMaxDateConfig(this.selectedAppointmentPage.start,this.selectedAppointmentPage.finish),e&&null!=this.selectedAppointmentPage2&&this.setMinMaxDateConfig(this.selectedAppointmentPage2.start,this.selectedAppointmentPage2.finish)}loadResources(){this.loadAccountingGroups(),this.loadMaterials()}setAccountingGroupsType(t){t!=this.accountingGroupType&&(this.selectedAccountingGroupForReport=null,this.searchForm.patchValue({parameterValue:""}),super.onSearchFormSubmit(),this.accountingGroupType=t,this.storageService.localStorageSetItem("_accountingGroupType_"+this.getAppId(),this.accountingGroupType,!1),"general"==this.accountingGroupType&&(this.parameterName="accountingGroupName/materialName"),"appointmentpage"==this.accountingGroupType&&(this.parameterName="accountingGroupName/materialName/unityName/appointmentPageName"),this.listData(),this.loadResources())}setObject(t){if(this.selectedAppointmentPage2=null,super.setObject(t),this.dataForm.setValue({amount:(""+this.mathService.formatNumber(t.amount,3,".")).replace(".",","),unitaryCost:(""+this.mathService.formatNumber(t.unitaryCost,2,".")).replace(".",","),occurency:this.dateService.dateToForm(t.occurency),type:t.type}),this.setProcessing(!0),null!=t.appointmentPageId&&t.appointmentPageId>0)this.appointmentPageService.load(t.appointmentPageId).then(t=>{this.selectedAppointmentPage2=t,this.setDateIntervals(!1,!0),this.setProcessing(!1)});else{if(this.setDateIntervals(!1,!1),this.setProcessing(!1),t.id>0)return this.setSelectedAccountingGroup(t.accountingGroupId),void this.setSelectedMaterial(t.materialId);this.materials.length>0&&this.setSelectedMaterial(this.materials[0].id),this.accountingGroups.length>0&&this.setSelectedAccountingGroup(this.accountingGroups[0].id)}}addObject(){super.addObject(),this.setDateIntervals(!0,!1)}setSelectedObject(t){this.prepareToShowSelectedObject(t),super.setSelectedObject(t)}prepareToShowSelectedObject(t){this.occurencySelectedObject="",null!=t&&t.id>0&&(this.occurencySelectedObject=this.dateService.dateToForm(t.occurency))}prepareData(t){if(t.alreadyPrepared)return t;var e=t.amount*t.unitaryCost;return t.occurency=this.dateService.dateToForm(t.occurency),t.typeLabel="("+("E"==t.type?"+":"-")+") ",t.amountLabel=(""+this.mathService.formatNumber(t.amount,3,".")).replace(".",","),t.unitaryCostLabel=(""+this.mathService.formatNumber(t.unitaryCost,2,".")).replace(".",","),t.totalLabel=(""+this.mathService.formatNumber(e,2,".")).replace(".",","),t.alreadyPrepared=!0,t}prepareToSaveUpdate(t){return t.amount=parseFloat((""+t.amount).replace(",",".")),t.unitaryCost=parseFloat((""+t.unitaryCost).replace(",",".")),t.occurency=this.dateService.dateFromForm(t.occurency),t.accountingGroupId=this.selectedAccountingGroup.id,t.accountingGroupName=this.selectedAccountingGroup.name,t.materialId=this.selectedMaterial.id,t.materialName=this.selectedMaterial.name,t.materialUnits=this.selectedMaterial.units,t.materialMeasureUnitId=this.selectedMaterial.measureUnitId,t.materialMeasureUnitName=this.selectedMaterial.measureUnitName,"general"==this.origin||null!=this.idObjectEdit&&this.idObjectEdit>0||"appointmentpage"==this.accountingGroupType&&"appointmentpage"==this.origin&&(t.appointmentPageId=this.selectedAppointmentPage.id,t.appointmentPageName=this.selectedAppointmentPage.name),t}makeSelectSearchedItemDestaked(t,e){return t.accountingGroupName=this.makeDestak(t.accountingGroupName,e),t.materialName=this.makeDestak(t.materialName,e),"appointmentpage"==this.accountingGroupType&&(t.appointmentPageName=this.makeDestak(t.appointmentPageName,e)),t}validateFormFields(){return this.errorRequired("amount")&&this.addValidationMessage("Quantidade \xe9 requerida!"),this.errorRequired("unitaryCost")&&this.addValidationMessage("Custo/Valor Unit\xe1rio \xe9 requerido!"),this.errorRequired("occurency")&&this.addValidationMessage("Data \xe9 requerida!"),this.errorRequired("type")&&this.addValidationMessage("Tipo \xe9 requerido!"),null==this.selectedAccountingGroup&&this.addValidationMessage("Grupo Lan\xe7amento \xe9 requerido!"),null==this.selectedMaterial&&this.addValidationMessage("Material/Produto \xe9 requerido!"),!this.inValidationMsgs()}preValidateToSaveUpdate(t){null==this.selectedAccountingGroup&&this.addValidationMessage("Grupo Lan\xe7amento \xe9 requerido!"),null==this.selectedMaterial&&this.addValidationMessage("Material/Produto \xe9 requerido!");var e=this.dateService.dateFromForm(t.occurency);if(this.emptyString(e)&&this.addValidationMessage("Data est\xe1 incorreta!"),this.inValidationMsgs())return!1;var i="appointmentpage"==this.accountingGroupType,a=null!=this.idObjectEdit&&this.idObjectEdit>0,n=this.dateService.dateSqltoDate(e),o=null,r=null;if(i&&a&&(o=this.dateService.dateSqltoDate(this.selectedAppointmentPage2.start),r=this.dateService.dateSqltoDate(this.selectedAppointmentPage2.finish)),i&&!a&&(o=this.dateService.dateSqltoDate(this.selectedAppointmentPage.start),r=this.dateService.dateSqltoDate(this.selectedAppointmentPage.finish)),i&&!this.dateService.dateInInterval(n,o,r)){var c="Data deve estar entre ["+this.dateService.dateBrWhitTime(o)+"] e ";c+=" ["+this.dateService.dateBrWhitTime(r)+"] !",this.addValidationMessage(c)}return!this.inValidationMsgs()}backToOrigin(){"appointmentpage"==this.origin&&(this.storageService.clear(),this.eventEmitterService.get("appointmentpages").emit({}))}toReport(){this.setDateIntervals(!1,!1),this.setInActivity(),this.inReport=!0,this.inFilter=!0,this.htmlReport=null,this.selectedAccountingGroupForReport=null}setSelectedAccountingGroupForReport(t){this.selectedAccountingGroupForReport=null!=t&&t>0?this.getFromArrayById(this.accountingGroups,t,null):null}backFromReport(){this.setDateIntervals(!0,!1),this.setInActivity(),this.inReport=!1,this.htmlReport=null}patchValueReport(t,e){"start"==t&&this.reportForm.patchValue({start:e}),"finish"==t&&this.reportForm.patchValue({finish:e})}validateReport(t){return this.errorRequiredForm(this.reportForm,"start")&&this.addValidationMessage("Data In\xedcio \xe9 requerida!"),this.errorRequiredForm(this.reportForm,"finish")&&this.addValidationMessage("Data T\xe9rmino \xe9 requerida!"),!this.inValidationMsgs()&&(this.emptyString(this.dateService.dateFromForm(t.start))&&this.addValidationMessage("Data In\xedcio est\xe1 incorreta!"),this.emptyString(this.dateService.dateFromForm(t.finish))&&this.addValidationMessage("Data T\xe9rmino est\xe1 incorreta!"),!this.inValidationMsgs()&&(this.dateService.validateDateInterval(t.start,t.finish)||this.addValidationMessage("O intervalo entre Data In\xedcio e Data T\xe9rmino \xe9 inv\xe1lido!"),!this.inValidationMsgs()))}printReport(){null!=this.htmlReport&&this.eventEmitterService.get("printHtml").emit({html:this.htmlReport})}getObjectConditions(t){return{accountingGroupType:this.accountingGroupType,accountingGroupId:null!=this.selectedAccountingGroupForReport?this.selectedAccountingGroupForReport.id:0,start:this.dateService.dateFromForm(t.start),finish:this.dateService.dateFromForm(t.finish),ownerId:this.storageService.localStorageGetItem("_ownerId_"+this.getAppId()),_token:this.storageService.localStorageGetItem("_token_"+this.getAppId())}}loadReport(){if(this.validationMessages=null,this.canceling)return this.canceling=!1,this.processValidation=!1,void this.reportForm.reset();this.processValidation=!0;var t=this.reportForm.value;this.validateReport(t)&&(this.setProcessing(!0),this.accountingEntryService.loadReport(this.getObjectConditions(t)).then(t=>{this.setProcessing(!1),this.processValidation=!1,this.processObjectAndValidationResult(t[0],!0)&&(this.htmlReport=t[0].msg,this.htmlReport+='<div class="clear" style="margin-top: .5em;"></div>',this.inFilter=!1)}))}cancelReport(){this.setInActivity(),this.canceling=!0}changeFilterReport(){this.setInActivity(),this.inFilter=!this.inFilter}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(o.g),l.Mb(u.c),l.Mb(o.a),l.Mb(d.a),l.Mb(c.b),l.Mb(c.a),l.Mb(m.c),l.Mb(p.a),l.Mb(b.a),l.Mb(g.a),l.Mb(h.a))},t.\u0275cmp=l.Gb({type:t,selectors:[["accountingentry-root"]],features:[l.vb],decls:17,vars:18,consts:[["aria-label","navega\xe7\xe3o pelos agrupamentos de lan\xe7amentos de caixa, \n                 de acordo com os tipos dos respectivos grupos"],[2,"margin","0.2em 0em"],[3,"objects","selectedTab","noRender","setTabEmitter"],[3,"ngIf"],[1,"clear"],["selectedObjectTemplate",""],["objectDetail",""],["objectDeleteConfirmation",""],["objectUnDeleteConfirmation",""],[3,"title","editing","searchForm","backToOrigin","useReport","auditingExclusions","enabledAuditList","disabledAddNew","backToOriginEmitter","toReportEmitter","onSearchFormSubmitEmitter","listDataEmitter","listDataNoCacheEmitter","auditListEmitter","normalListEmitter","addObjectEmitter"],[1,"searchForm"],[1,"field"],["placement","right","ngbTooltip","Voltar para lista","aria-label","Voltar para lista","type","button",1,"btn","btn-primary","clickable","formHeaderButton",3,"click"],[1,"fas","fa-arrow-left"],["class","field",4,"ngIf"],[2,"float","right","margin-right","0.3em"],["placement","left","ngbTooltip","Trocar entre relat\xf3rio e campos de filtro","aria-label","Trocar entre relat\xf3rio e campos de filtro","type","button",1,"btn","btn-primary","clickable","formHeaderButton",3,"disabled","click"],[1,"fas","fa-retweet"],["placement","left","ngbTooltip","Imprimir Relat\xf3rio","aria-label","Imprimir Relat\xf3rio","type","button",1,"btn","btn-primary","clickable","formHeaderButton",3,"disabled","click"],[1,"fas","fa-print"],["aria-label","campos de preenchimento para gera\xe7\xe3o do relat\xf3rio de lan\xe7amentos"],["class","dataForm",3,"formGroup","ngSubmit",4,"ngIf"],[2,"border-top","1px solid #a0a0a0","height","1px"],["style","width: 100%; padding: .5em",3,"innerHtml",4,"ngIf"],[1,"clear",2,"margin-top","2em"],[1,"dataForm",3,"formGroup","ngSubmit"],["id","selectOneAccountingGroupReport","widthPerc","49","label","Gr. Lan\xe7.","titlee","Grupo Lan\xe7amento","minusOneLabel","Todos",3,"selectedObject","objects","infoContainEmitter","filterObjectsEmitter","valueChangedEmitter"],["label","Data In\xedcio (*)","titlee","Data In\xedcio","formControlName","start","widthPerc","23","ngDefaultControl","",3,"formGroup"],["label","Data T\xe9rmino (*)","titlee","Data T\xe9rmino","formControlName","finish","widthPerc","23","ngDefaultControl","",3,"formGroup"],["saveText","Gerar Relat\xf3rio",3,"validationMessages","processValidation","cancelDataEmitter"],[2,"width","100%","padding",".5em",3,"innerHtml"],[3,"ngIf","ngIfElse"],["listObjects",""],["aria-label","cadastro e altera\xe7\xe3o dos lan\xe7amentos"],["id","selectOneAccountingGroup","label","Grupo Lan\xe7amento (*)","titlee","Grupo Lan\xe7amento","emptyLabel","Selecione",3,"selectedObject","objects","infoContainEmitter","filterObjectsEmitter","valueChangedEmitter"],["id","selectOneMaterial","label","Material/Produto (*)","titlee","Material/Produto","emptyLabel","Selecione",3,"selectedObject","objects","infoContainEmitter","filterObjectsEmitter","valueChangedEmitter"],["label","Tipo (*)","titlee","Tipo","formControlName","type","widthPerc","23","ngDefaultControl","",3,"objects"],["label","Quantidade (*)","titlee","Quantidade","maxchars","14","minValue","0","maxValue","4294967295","forNumber","true","maskk","0*,000","preserveSpecialCharacters","true","formControlName","amount","widthPerc","25","ngDefaultControl","",3,"formGroup"],["label","Custo/Valor Unit\xe1rio (*)","titlee","Custo/Valor Unit\xe1rio","maxchars","13","minValue","0","maxValue","4294967295","forNumber","true","maskk","0*,00","preserveSpecialCharacters","true","formControlName","unitaryCost","widthPerc","25","ngDefaultControl","",3,"formGroup"],["label","Data (*)","titlee","Data","formControlName","occurency","widthPerc","23","ngDefaultControl","",3,"formGroup"],[3,"validationMessages","processValidation","cancelDataEmitter"],["aria-label","lista dos lan\xe7amentos de grupos do tipo selecionado na navega\xe7\xe3o da p\xe1gina"],["class","table","mdbTable","",4,"ngIf"],["mdbTable","",1,"table"],[1,"black","white-text"],["scope","col","aria-label","Grupo Lan\xe7amento mais Data na linha abaixo","title","Grupo Lan\xe7amento mais Data na linha abaixo",2,"width","9em"],["scope","col","style","width: auto;","title","Material/Produto","aria-label","Material/Produto",4,"ngIf"],["scope","col","style","width: auto;","title","Material/Produto mais evento/atividade na linha abaixo","aria-label","Material/Produto mais evento/atividade na linha abaixo",4,"ngIf"],["scope","col","aria-label","Quantidade","title","Quantidade",2,"width","5em"],["scope","col","aria-label","Valor Unit\xe1rio","title","Valor Unit\xe1rio",2,"width","5em"],["scope","col","aria-label","Valor Total","title","Valor Total",2,"width","6em"],["scope","col","style","width: 7em;",4,"ngIf"],["scope","col","style","width: 5em;",4,"ngIf"],["mdbTableCol","",4,"ngFor","ngForOf","ngForTrackBy"],["colspan","6",1,"navigationBottom"],[3,"pages","selectedPage","previousPageDisabled","nextPageDisabled","rowsPerPage","pageRange","totalPages","totalRows","useAdjustPagination","previousPageEmitter","setPageEmitter","nextPageEmitter","adjustPaginationEmitter"],["scope","col","title","Material/Produto","aria-label","Material/Produto",2,"width","auto"],["scope","col","title","Material/Produto mais evento/atividade na linha abaixo","aria-label","Material/Produto mais evento/atividade na linha abaixo",2,"width","auto"],["scope","col",2,"width","7em"],["scope","col",2,"width","5em"],["mdbTableCol",""],[1,"text"],[3,"innerHtml"],[3,"innerHtml",4,"ngIf"],[1,"number",3,"innerHtml"],[1,"number"],[1,"actions"],[1,"buttons"],[3,"auditingExclusions","object","logged","noAction","objectDeleteConfirmation","objectUnDeleteConfirmation","objectDetail","showObjectEmitter","editObjectEmitter","deleteObjectEmitter","unDeleteObjectEmitter"],["scope","row",1,"text",2,"width","10.5em"],[1,"text","noBorderRight"],["scope","row",1,"text"],["label","Lan\xe7amento Caixa","info","true",3,"selectedObject","templateOutlet","cancelDataEmitter"],["label","Lan\xe7amento Caixa",3,"selectedObject","auditingExclusions","templateOutlet","confirmDeleteObjectEmitter","cancelDataEmitter"],["label","Lan\xe7amento Caixa","redo","true",3,"selectedObject","auditingExclusions","templateOutlet","confirmDeleteObjectEmitter","cancelDataEmitter"]],template:function(t,e){1&t&&(l.Rb(0,"nav",0),l.Rb(1,"div",1),l.Rb(2,"rich-tab-bar",2),l.cc("setTabEmitter",function(t){return e.setAccountingGroupsType(t)}),l.Qb(),l.Rb(3,"rich-tab-bar",2),l.cc("setTabEmitter",function(t){return e.setAccountingGroupsType(t)}),l.Qb(),l.Qb(),l.Qb(),l.Gc(4,P,1,11,"ng-template",3),l.Gc(5,F,12,3,"ng-template",3),l.Nb(6,"div",4),l.Gc(7,Q,5,2,"ng-template",3),l.Gc(8,_,4,2,"ng-template",3),l.Gc(9,K,25,7,"ng-template",null,5,l.Hc),l.Gc(11,J,1,2,"ng-template",null,6,l.Hc),l.Gc(13,Z,1,3,"ng-template",null,7,l.Hc),l.Gc(15,Y,1,3,"ng-template",null,8,l.Hc)),2&t&&(l.yb(2),l.jc("objects",l.qc(12,X,l.oc(10,z),l.oc(11,W)))("selectedTab",e.accountingGroupType)("noRender",!e.modulesNames.includes("appointmentpage")),l.yb(1),l.jc("objects",l.pc(16,$,l.oc(15,z)))("selectedTab",e.accountingGroupType)("noRender",e.modulesNames.includes("appointmentpage")),l.yb(1),l.jc("ngIf",!e.inReport),l.yb(1),l.jc("ngIf",e.inReport),l.yb(2),l.jc("ngIf",e.inReport),l.yb(1),l.jc("ngIf",!e.inReport))},directives:[f.a,a.j,y.a,o.i,n.t,n.n,n.g,j.a,v.a,n.m,n.e,n.b,R.a,G.a,A.a,a.i,S.a,O.a,E.a],encapsulation:2}),t})()}];let et=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({imports:[[c.c.forChild(tt)],c.c]}),t})();var it=i("kS8M"),at=i("gJHO"),nt=i("vT00"),ot=i.n(nt);Object(a.w)(ot.a);let rt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({providers:[at.b,{provide:o.b,useClass:at.a}],imports:[[a.b,n.h,n.q,o.h,r.a.forRoot(),et,it.a]]}),t})()}}]);